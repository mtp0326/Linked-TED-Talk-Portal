"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
function serializerMiddleware(requestSerializerProvider) {
    var _this = this;
    return function (next, _a) {
        var model = _a.model;
        return function (args) { return tslib_1.__awaiter(_this, void 0, void 0, function () {
            var requestSerializer, request;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, requestSerializerProvider()];
                    case 1:
                        requestSerializer = _a.sent();
                        request = requestSerializer.serialize(model, args.input);
                        if (request.body && ['GET', 'HEAD'].indexOf(request.method) >= 0) {
                            // remove body for GET/HEAD requests (fetch complains)
                            delete request.body;
                        }
                        return [2 /*return*/, next(tslib_1.__assign({}, args, { request: request }))];
                }
            });
        }); };
    };
}
exports.serializerMiddleware = serializerMiddleware;
//# sourceMappingURL=index.js.map